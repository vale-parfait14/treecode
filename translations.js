// Translations for the portfolio website
const translations = {
    fr: {
        nav: {
            home: "Accueil",
            about: "À propos",
            skills: "Compétences",
            projects: "Projets",
            contact: "Contact"
        },
        hero: {
            greeting: "Bonjour, je me prénomme",
            greetingAfternoon: "Bon après-midi, je me prénomme",
            greetingEvening: "Bonsoir, je me prénomme",
            subtitle: "Développeur Fullstack",
            description: "Je crée des expériences web, mobile modernes et performantes",
            cta1: "Voir mes projets",
            cta2: "Me contacter"
        },
        about: {
            title: "À propos",
            text1: "Passionné par le développement web et Mobile, je conçois des applications complètes du frontend au backend.",
            text2: "Mon approche combine design élégant, code propre et performance optimale pour créer des solutions qui font la différence.",
            stat1: "Années d'expérience",
            stat2: "Projets réalisés",
            stat3: "Technologies maîtrisées"
        },
        skills: {
            title: "Compétences"
        },
        projects: {
            title: "Projets",
            websites: "Sites Web",
            apps: "Applications",
            viewSite: "Voir le site",
            downloadApk: "Télécharger l'APK",
            currentPartner: "Partenaire actuel",
            drmar: {
                title: "Dr Mar Ndiaye Ophtalmo",
                desc: "Site professionnel pour cabinet d'ophtalmologie avec prise de rendez-vous en ligne"
            },
            genii: {
                title: "GeniiVibes Consulting",
                desc: "Site web corporate pour cabinet de conseil avec présentation des services et contact"
            },
            plateau: {
                title: "Plateau Medical Pr Gabriel A. Senghor",
                desc: "Site web pour centre médical avec informations sur les services et équipe médicale"
            },
            sam: {
                title: "SAM Digitale",
                desc: "Plateforme digitale avec solutions innovantes et services numériques"
            },
            samApp: {
                title: "SAM Digitale App",
                desc: "Application mobile de SAM Digitale - Disponible uniquement au Sénégal pour l'instant"
            }
        },
        contact: {
            title: "Restons en contact",
            subtitle: "Une idée de projet ? Discutons-en autour d'un café ☕",
            email: "Email",
            phone: "Téléphone",
            form: {
                name: "Nom",
                namePlaceholder: "Votre nom",
                email: "Email",
                message: "Message",
                messagePlaceholder: "Votre message...",
                send: "Envoyer le message",
                sending: "Envoi en cours...",
                success: "Message envoyé avec succès ! Je vous répondrai bientôt.",
                error: "Erreur lors de l'envoi. Veuillez réessayer."
            }
        },
        footer: {
            rights: "Tous droits réservés."
        }
    },
    en: {
        nav: {
            home: "Home",
            about: "About",
            skills: "Skills",
            projects: "Projects",
            contact: "Contact"
        },
        hero: {
            greeting: "Hello, my name is",
            greetingAfternoon: "Good afternoon, my name is",
            greetingEvening: "Good evening, my name is",
            subtitle: "Fullstack Developer",
            description: "I create modern and high-performance web and mobile experiences",
            cta1: "View my projects",
            cta2: "Contact me"
        },
        about: {
            title: "About",
            text1: "Passionate about web and mobile development, I design complete applications from frontend to backend.",
            text2: "My approach combines elegant design, clean code and optimal performance to create solutions that make a difference.",
            stat1: "Years of experience",
            stat2: "Completed projects",
            stat3: "Technologies mastered"
        },
        skills: {
            title: "Skills"
        },
        projects: {
            title: "Projects",
            websites: "Websites",
            apps: "Applications",
            viewSite: "View site",
            downloadApk: "Download APK",
            currentPartner: "Current partner",
            drmar: {
                title: "Dr Mar Ndiaye Ophtalmo",
                desc: "Professional website for ophthalmology clinic with online appointment booking"
            },
            genii: {
                title: "Genii Vibes Consulting",
                desc: "Corporate website for consulting firm with services presentation and contact"
            },
            plateau: {
                title: "Plateau Medical Senghor",
                desc: "Website for medical center with information about services and medical team"
            },
            sam: {
                title: "SAM Digitale",
                desc: "Digital platform with innovative solutions and digital services"
            },
            samApp: {
                title: "SAM Digitale App",
                desc: "SAM Digitale mobile application - Currently available only in Senegal"
            }
        },
        contact: {
            title: "Let's stay in touch",
            subtitle: "Have a project idea? Let's discuss it over coffee ☕",
            email: "Email",
            phone: "Phone",
            form: {
                name: "Name",
                namePlaceholder: "Your name",
                email: "Email",
                message: "Message",
                messagePlaceholder: "Your message...",
                send: "Send message",
                sending: "Sending...",
                success: "Message sent successfully! I'll get back to you soon.",
                error: "Error sending message. Please try again."
            }
        },
        footer: {
            rights: "All rights reserved."
        }
    },
    es: {
        nav: {
            home: "Inicio",
            about: "Sobre mí",
            skills: "Habilidades",
            projects: "Proyectos",
            contact: "Contacto"
        },
        hero: {
            greeting: "Hola, mi nombre es",
            greetingAfternoon: "Buenas tardes, mi nombre es",
            greetingEvening: "Buenas noches, mi nombre es",
            subtitle: "Desarrollador Fullstack",
            description: "Creo experiencias web y móviles modernas y de alto rendimiento",
            cta1: "Ver mis proyectos",
            cta2: "Contáctame"
        },
        about: {
            title: "Sobre mí",
            text1: "Apasionado por el desarrollo web y móvil, diseño aplicaciones completas desde el frontend hasta el backend.",
            text2: "Mi enfoque combina diseño elegante, código limpio y rendimiento óptimo para crear soluciones que marcan la diferencia.",
            stat1: "Años de experiencia",
            stat2: "Proyectos realizados",
            stat3: "Tecnologías dominadas"
        },
        skills: {
            title: "Habilidades"
        },
        projects: {
            title: "Proyectos",
            websites: "Sitios Web",
            apps: "Aplicaciones",
            viewSite: "Ver sitio",
            downloadApk: "Descargar APK",
            currentPartner: "Socio actual",
            drmar: {
                title: "Dr Mar Ndiaye Ophtalmo",
                desc: "Sitio web profesional para clínica de oftalmología con reserva de citas en línea"
            },
            genii: {
                title: "Genii Vibes Consulting",
                desc: "Sitio web corporativo para empresa de consultoría con presentación de servicios y contacto"
            },
            plateau: {
                title: "Plateau Medical Senghor",
                desc: "Sitio web para centro médico con información sobre servicios y equipo médico"
            },
            sam: {
                title: "SAM Digitale",
                desc: "Plataforma digital con soluciones innovadoras y servicios digitales"
            },
            samApp: {
                title: "SAM Digitale App",
                desc: "Aplicación móvil de SAM Digitale - Disponible actualmente solo en Senegal"
            }
        },
        contact: {
            title: "Mantengamos el contacto",
            subtitle: "¿Tienes una idea de proyecto? Hablemos tomando un café ☕",
            email: "Correo",
            phone: "Teléfono",
            form: {
                name: "Nombre",
                namePlaceholder: "Tu nombre",
                email: "Correo",
                message: "Mensaje",
                messagePlaceholder: "Tu mensaje...",
                send: "Enviar mensaje",
                sending: "Enviando...",
                success: "¡Mensaje enviado con éxito! Te responderé pronto.",
                error: "Error al enviar. Por favor, inténtalo de nuevo."
            }
        },
        footer: {
            rights: "Todos los derechos reservados."
        }
    },
    fi: {
        nav: {
            home: "Etusivu",
            about: "Tietoa",
            skills: "Taidot",
            projects: "Projektit",
            contact: "Yhteystiedot"
        },
        hero: {
            greeting: "Hei, nimeni on",
            greetingAfternoon: "Hyvää iltapäivää, nimeni on",
            greetingEvening: "Hyvää iltaa, nimeni on",
            subtitle: "Fullstack-kehittäjä",
            description: "Luon moderneja ja tehokkaita web- ja mobiilisovelluksia",
            cta1: "Katso projektini",
            cta2: "Ota yhteyttä"
        },
        about: {
            title: "Tietoa",
            text1: "Intohimoisena web- ja mobiilisovelluskehittäjänä suunnittelen kokonaisia sovelluksia frontendistä backendiin.",
            text2: "Lähestymistapani yhdistää tyylikkään suunnittelun, siistin koodin ja optimaalisen suorituskyvyn luodakseni ratkaisuja, jotka tekevät eron.",
            stat1: "Vuotta kokemusta",
            stat2: "Toteutettua projektia",
            stat3: "Hallittua teknologiaa"
        },
        skills: {
            title: "Taidot"
        },
        projects: {
            title: "Projektit",
            websites: "Verkkosivut",
            apps: "Sovellukset",
            viewSite: "Katso sivusto",
            downloadApk: "Lataa APK",
            currentPartner: "Nykyinen kumppani",
            drmar: {
                title: "Dr Mar Ndiaye Ophtalmo",
                desc: "Ammattimainen verkkosivusto silmälääkäriklinikalle online-ajanvarauksella"
            },
            genii: {
                title: "Genii Vibes Consulting",
                desc: "Yrityksen verkkosivusto konsultointiyritykselle palveluiden esittelyllä ja yhteystiedoilla"
            },
            plateau: {
                title: "Plateau Medical Senghor",
                desc: "Verkkosivusto lääkärikeskukselle tiedoilla palveluista ja lääkäritiimistä"
            },
            sam: {
                title: "SAM Digitale",
                desc: "Digitaalinen alusta innovatiivisilla ratkaisuilla ja digitaalisilla palveluilla"
            },
            samApp: {
                title: "SAM Digitale App",
                desc: "SAM Digitale -mobiilisovellus - Saatavilla tällä hetkellä vain Senegalissa"
            }
        },
        contact: {
            title: "Pidetään yhteyttä",
            subtitle: "Onko sinulla projekti-idea? Keskustellaan kahvin äärellä ☕",
            email: "Sähköposti",
            phone: "Puhelin",
            form: {
                name: "Nimi",
                namePlaceholder: "Nimesi",
                email: "Sähköposti",
                message: "Viesti",
                messagePlaceholder: "Viestisi...",
                send: "Lähetä viesti",
                sending: "Lähetetään...",
                success: "Viesti lähetetty onnistuneesti! Vastaan sinulle pian.",
                error: "Virhe lähetyksessä. Yritä uudelleen."
            }
        },
        footer: {
            rights: "Kaikki oikeudet pidätetään."
        }
    },
    ru: {
        nav: {
            home: "Главная",
            about: "Обо мне",
            skills: "Навыки",
            projects: "Проекты",
            contact: "Контакты"
        },
        hero: {
            greeting: "Привет, меня зовут",
            greetingAfternoon: "Добрый день, меня зовут",
            greetingEvening: "Добрый вечер, меня зовут",
            subtitle: "Fullstack-разработчик",
            description: "Я создаю современные и высокопроизводительные веб и мобильные приложения",
            cta1: "Мои проекты",
            cta2: "Связаться"
        },
        about: {
            title: "Обо мне",
            text1: "Увлечённый веб и мобильной разработкой, я создаю полноценные приложения от фронтенда до бэкенда.",
            text2: "Мой подход сочетает элегантный дизайн, чистый код и оптимальную производительность для создания решений, которые имеют значение.",
            stat1: "Лет опыта",
            stat2: "Выполненных проектов",
            stat3: "Освоенных технологий"
        },
        skills: {
            title: "Навыки"
        },
        projects: {
            title: "Проекты",
            websites: "Веб-сайты",
            apps: "Приложения",
            viewSite: "Открыть сайт",
            downloadApk: "Скачать APK",
            currentPartner: "Текущий партнёр",
            drmar: {
                title: "Dr Mar Ndiaye Ophtalmo",
                desc: "Профессиональный сайт офтальмологической клиники с онлайн-записью на приём"
            },
            genii: {
                title: "Genii Vibes Consulting",
                desc: "Корпоративный сайт консалтинговой компании с презентацией услуг и контактами"
            },
            plateau: {
                title: "Plateau Medical Senghor",
                desc: "Сайт медицинского центра с информацией об услугах и медицинской команде"
            },
            sam: {
                title: "SAM Digitale",
                desc: "Цифровая платформа с инновационными решениями и цифровыми услугами"
            },
            samApp: {
                title: "SAM Digitale App",
                desc: "Мобильное приложение SAM Digitale - Пока доступно только в Сенегале"
            }
        },
        contact: {
            title: "Давайте поддерживать связь",
            subtitle: "Есть идея проекта? Обсудим за чашкой кофе ☕",
            email: "Эл. почта",
            phone: "Телефон",
            form: {
                name: "Имя",
                namePlaceholder: "Ваше имя",
                email: "Эл. почта",
                message: "Сообщение",
                messagePlaceholder: "Ваше сообщение...",
                send: "Отправить",
                sending: "Отправка...",
                success: "Сообщение успешно отправлено! Я скоро отвечу.",
                error: "Ошибка отправки. Попробуйте ещё раз."
            }
        },
        footer: {
            rights: "Все права защищены."
        }
    }
};

// Language Manager
class LanguageManager {
    constructor() {
        this.currentLang = localStorage.getItem('preferredLang') || 'fr';
        this.init();
    }

    init() {
        this.langBtn = document.getElementById('langBtn');
        this.langDropdown = document.getElementById('langDropdown');
        this.langOptions = document.querySelectorAll('.lang-option');
        
        if (!this.langBtn) return;
        
        // Set initial language
        this.setLanguage(this.currentLang, false);
        
        // Toggle dropdown
        this.langBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            this.langDropdown.classList.toggle('active');
            this.langBtn.classList.toggle('active');
        });
        
        // Language selection
        this.langOptions.forEach(option => {
            option.addEventListener('click', () => {
                const lang = option.dataset.lang;
                const flag = option.dataset.flag;
                this.setLanguage(lang, true, flag);
                this.langDropdown.classList.remove('active');
                this.langBtn.classList.remove('active');
            });
        });
        
        // Close dropdown on outside click
        document.addEventListener('click', () => {
            this.langDropdown.classList.remove('active');
            this.langBtn.classList.remove('active');
        });
    }

    setLanguage(lang, save = true, flag = null) {
        if (!translations[lang]) return;
        
        this.currentLang = lang;
        if (save) {
            localStorage.setItem('preferredLang', lang);
        }
        
        // Update button display
        const activeOption = document.querySelector(`.lang-option[data-lang="${lang}"]`);
        if (activeOption) {
            flag = flag || activeOption.dataset.flag;
            this.langBtn.querySelector('.lang-flag').textContent = flag;
            this.langBtn.querySelector('.lang-code').textContent = lang.toUpperCase();
            
            // Update active state
            this.langOptions.forEach(opt => opt.classList.remove('active'));
            activeOption.classList.add('active');
        }
        
        // Update HTML lang attribute
        document.documentElement.lang = lang;
        
        // Translate all elements
        this.translatePage(lang);
        
        // Update dynamic greeting
        this.updateGreeting(lang);
    }

    translatePage(lang) {
        const t = translations[lang];
        
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.dataset.i18n;
            const value = this.getNestedValue(t, key);
            if (value) {
                el.textContent = value;
                
                // Also update data-text attribute if specified
                if (el.dataset.i18nAttr) {
                    el.setAttribute(el.dataset.i18nAttr, value);
                }
            }
        });
        
        // Update placeholders
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.dataset.i18nPlaceholder;
            const value = this.getNestedValue(t, key);
            if (value) {
                el.placeholder = value;
            }
        });
    }

    getNestedValue(obj, path) {
        return path.split('.').reduce((acc, part) => acc && acc[part], obj);
    }

    updateGreeting(lang) {
        const hour = new Date().getHours();
        const t = translations[lang].hero;
        const greetingEl = document.getElementById('dynamicGreeting');
        
        if (!greetingEl) return;
        
        let greeting;
        if (hour >= 5 && hour < 12) {
            greeting = t.greeting;
        } else if (hour >= 12 && hour < 18) {
            greeting = t.greetingAfternoon;
        } else {
            greeting = t.greetingEvening;
        }
        
        greetingEl.textContent = greeting;
    }

    getCurrentTranslations() {
        return translations[this.currentLang];
    }
}

// Initialize language manager when DOM is ready
let langManager;
document.addEventListener('DOMContentLoaded', () => {
    langManager = new LanguageManager();
});

// Export for use in other scripts
window.langManager = langManager;
window.translations = translations;
